<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1291px" preserveAspectRatio="none" style="width:1703px;height:1291px;" version="1.1" viewBox="0 0 1703 1291" width="1703px" zoomAndPan="magnify"><defs><filter height="300%" id="fdg4pjgx08gz6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="270.8438" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="201" y="89.5703"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="232.4922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="206" y="127.9219"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="46" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="201" y="1224.3125"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="893.8984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="459" y="360.4141"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="823.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="565" y="431.1172"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="717.4922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="570" y="469.4688"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="780" y="504.8203"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="780" y="1046.9063"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="864.5" y="565.1719"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="956.5" y="625.5234"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="79.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="956.5" y="1107.2578"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="289.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1119" y="720.0938"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="147.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1297" y="819.1484"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1506" y="936.2031"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="1114.3906" style="stroke: #000000; stroke-width: 2.0;" width="1454.5" x="125.5" y="147.9219"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="239.1094" style="stroke: #000000; stroke-width: 2.0;" width="494.5" x="1075.5" y="735.0938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="205.5" x2="205.5" y1="57.2188" y2="1279.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="464" x2="464" y1="272.6016" y2="1279.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="570" x2="570" y1="208.3828" y2="1279.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="785" x2="785" y1="57.2188" y2="1279.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="869" x2="869" y1="57.2188" y2="1279.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="961" x2="961" y1="57.2188" y2="1279.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1123.5" x2="1123.5" y1="675.6328" y2="1279.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1301.5" x2="1301.5" y1="57.2188" y2="1279.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1511" x2="1511" y1="57.2188" y2="1279.3125"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1633" x2="1633" y1="57.2188" y2="1279.3125"/><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="135.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="173" y="24.5332">scheduler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="142.5" y="42.1426">:PaymentScheduler</text><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="734" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="21" x="772.5" y="24.5332">org</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="741" y="42.1426">:Organization</text><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="43" x="846" y="20.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="853" y="42.1426">:App</text><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="113" x="903" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="9" x="955" y="24.5332">rt</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="910" y="42.1426">:RegistPayment</text><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="93" x="1253.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="16" x="1292" y="24.5332">trs</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="1260.5" y="42.1426">:Transaction</text><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="1462" y="20.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="1469" y="42.1426">:PaymentAPI</text><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="1570" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="7" x="1627.5" y="24.5332">lt</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1577" y="42.1426">:ListTransactions</text><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="270.8438" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="201" y="89.5703"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="232.4922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="206" y="127.9219"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="46" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="201" y="1224.3125"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="893.8984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="459" y="360.4141"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="823.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="565" y="431.1172"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="717.4922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="570" y="469.4688"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="780" y="504.8203"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="780" y="1046.9063"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="864.5" y="565.1719"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="956.5" y="625.5234"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="79.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="956.5" y="1107.2578"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="289.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1119" y="720.0938"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="147.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1297" y="819.1484"/><rect fill="#FFFFFF" filter="url(#fdg4pjgx08gz6)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1506" y="936.2031"/><ellipse cx="10.5" cy="88.8203" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#A80036" points="189,85.5703,199,89.5703,189,93.5703,193,89.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="15" x2="195" y1="89.5703" y2="89.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="18" y="84.7139">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="29" y="84.7139">create(day, timeOfDay, org)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="211" x2="258" y1="114.9219" y2="114.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="258" y1="114.9219" y2="127.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="217" x2="258" y1="127.9219" y2="127.9219"/><polygon fill="#A80036" points="227,123.9219,217,127.9219,227,131.9219,223,127.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="223" y="110.0654">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="234" y="110.0654">scheduleNextMonth()</text><path d="M125.5,147.9219 L198.5,147.9219 L198.5,155.9219 L188.5,165.9219 L125.5,165.9219 L125.5,147.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1114.3906" style="stroke: #000000; stroke-width: 2.0;" width="1454.5" x="125.5" y="147.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="140.5" y="162.417">loop</text><polygon fill="#A80036" points="489,184.625,499,188.625,489,192.625,493,188.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="216" x2="495" y1="188.625" y2="188.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="223" y="183.7686">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="234" y="183.7686">create(org, scheduler)</text><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="501" y="166.2734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="553" y="187.8066">task:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="120" x="508" y="205.416">MakePaymentTask</text><polygon fill="#A80036" points="425,248.8438,435,252.8438,425,256.8438,429,252.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="216" x2="431" y1="252.8438" y2="252.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="223" y="247.9873">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="44" x="234" y="247.9873">create()</text><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="437" y="230.4922"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="444.5" y="252.0254">timer:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="444" y="269.6348">Timer</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="216" x2="258" y1="317.0625" y2="317.0625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="258" y1="317.0625" y2="330.0625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="217" x2="258" y1="330.0625" y2="330.0625"/><polygon fill="#A80036" points="227,326.0625,217,330.0625,227,334.0625,223,330.0625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="223" y="312.2061">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="234" y="312.2061">date = getNextDate(day, timeOfDaye)</text><polygon fill="#A80036" points="447,356.4141,457,360.4141,447,364.4141,451,360.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="206" x2="453" y1="360.4141" y2="360.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="213" y="355.5576">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="224" y="355.5576">schedule(task, date)</text><path d="M159,373.4141 L159,399.4141 L509,399.4141 L509,383.4141 L499,373.4141 L159,373.4141 " fill="#FBFB77" filter="url(#fdg4pjgx08gz6)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M499,373.4141 L499,383.4141 L509,383.4141 L499,373.4141 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="239.25" y="391.9092">On the specified date and time</text><polygon fill="#A80036" points="553,427.1172,563,431.1172,553,435.1172,557,431.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="469" x2="559" y1="431.1172" y2="431.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="476" y="426.2607">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="487" y="426.2607">run()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="575" x2="622" y1="456.4688" y2="456.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="622" x2="622" y1="456.4688" y2="469.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="581" x2="622" y1="469.4688" y2="469.4688"/><polygon fill="#A80036" points="591,465.4688,581,469.4688,591,473.4688,587,469.4688" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="587" y="451.6123">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="598" y="451.6123">makePayments()</text><polygon fill="#A80036" points="768,500.8203,778,504.8203,768,508.8203,772,504.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580" x2="774" y1="504.8203" y2="504.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="587" y="499.9639">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="598" y="499.9639">lt = getListTransaction()</text><polygon fill="#A80036" points="852.5,561.1719,862.5,565.1719,852.5,569.1719,856.5,565.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580" x2="858.5" y1="565.1719" y2="565.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="587" y="560.3154">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="605" y="560.3154">rp = getRegistPayment()</text><polygon fill="#A80036" points="944.5,621.5234,954.5,625.5234,944.5,629.5234,948.5,625.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580" x2="950.5" y1="625.5234" y2="625.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="587" y="620.667">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="605" y="620.667">payment = newPayment(lt)</text><polygon fill="#A80036" points="1073.5,651.875,1083.5,655.875,1073.5,659.875,1077.5,655.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="1079.5" y1="655.875" y2="655.875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="968.5" y="651.0186">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="986.5" y="651.0186">create(lt, org)</text><rect fill="#FEFECE" filter="url(#fdg4pjgx08gz6)" height="49.2188" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="1085.5" y="633.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="1095" y="655.0566">payment</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="59" x="1092.5" y="672.666">:Payment</text><polygon fill="#A80036" points="1107,716.0938,1117,720.0938,1107,724.0938,1111,720.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580" x2="1113" y1="720.0938" y2="720.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="587" y="715.2373">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="605" y="715.2373">processPayments()</text><path d="M1075.5,735.0938 L1148.5,735.0938 L1148.5,743.0938 L1138.5,753.0938 L1075.5,753.0938 L1075.5,735.0938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="239.1094" style="stroke: #000000; stroke-width: 2.0;" width="494.5" x="1075.5" y="735.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="1090.5" y="749.5889">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1163.5" y="748.5127">[for each transaction]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1129" x2="1171" y1="775.7969" y2="775.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1171" x2="1171" y1="775.7969" y2="788.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1130" x2="1171" y1="788.7969" y2="788.7969"/><polygon fill="#A80036" points="1140,784.7969,1130,788.7969,1140,792.7969,1136,788.7969" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1136" y="770.9404">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="1154" y="770.9404">trs = getTransaction(ID)</text><polygon fill="#A80036" points="1285,815.1484,1295,819.1484,1285,823.1484,1289,819.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1129" x2="1291" y1="819.1484" y2="819.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1136" y="814.292">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="1154" y="814.292">makeBankTransfer()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1307" x2="1349" y1="849.5" y2="849.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1349" x2="1349" y1="849.5" y2="862.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1308" x2="1349" y1="862.5" y2="862.5"/><polygon fill="#A80036" points="1318,858.5,1308,862.5,1318,866.5,1314,862.5" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1314" y="844.6436">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="1332" y="844.6436">amount = getAmountToPay()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1307" x2="1349" y1="892.8516" y2="892.8516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1349" x2="1349" y1="892.8516" y2="905.8516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1308" x2="1349" y1="905.8516" y2="905.8516"/><polygon fill="#A80036" points="1318,901.8516,1308,905.8516,1318,909.8516,1314,905.8516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1314" y="887.9951">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="1332" y="887.9951">IBAN = getFreelancerIBAN()</text><polygon fill="#A80036" points="1494,932.2031,1504,936.2031,1494,940.2031,1498,936.2031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1307" x2="1500" y1="936.2031" y2="936.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1314" y="931.3467">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1332" y="931.3467">payTo(amount, IBAN)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1129" x2="1171" y1="1008.5547" y2="1008.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1171" x2="1171" y1="1008.5547" y2="1021.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1124" x2="1171" y1="1021.5547" y2="1021.5547"/><polygon fill="#A80036" points="1134,1017.5547,1124,1021.5547,1134,1025.5547,1130,1021.5547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="1136" y="1003.6982">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="1154" y="1003.6982">sendEmails()</text><polygon fill="#A80036" points="768,1042.9063,778,1046.9063,768,1050.9063,772,1046.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580" x2="774" y1="1046.9063" y2="1046.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="587" y="1042.0498">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="605" y="1042.0498">removeUnpaidTransactions()</text><polygon fill="#A80036" points="944.5,1103.2578,954.5,1107.2578,944.5,1111.2578,948.5,1107.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="580" x2="950.5" y1="1107.2578" y2="1107.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="587" y="1102.4014">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="605" y="1102.4014">payment = addPayment(payment)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="1008.5" y1="1137.6094" y2="1137.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1008.5" x2="1008.5" y1="1137.6094" y2="1150.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="967.5" x2="1008.5" y1="1150.6094" y2="1150.6094"/><polygon fill="#A80036" points="977.5,1146.6094,967.5,1150.6094,977.5,1154.6094,973.5,1150.6094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="973.5" y="1132.7529">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="991.5" y="1132.7529">validate(payment)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="966.5" x2="1008.5" y1="1185.9609" y2="1185.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1008.5" x2="1008.5" y1="1185.9609" y2="1198.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="961.5" x2="1008.5" y1="1198.9609" y2="1198.9609"/><polygon fill="#A80036" points="971.5,1194.9609,961.5,1198.9609,971.5,1202.9609,967.5,1198.9609" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="973.5" y="1181.1045">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="991.5" y="1181.1045">add(payment)</text><polygon fill="#A80036" points="222,1220.3125,212,1224.3125,222,1228.3125,218,1224.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="216" x2="564" y1="1224.3125" y2="1224.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="14" x="228" y="1219.4561">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="246" y="1219.4561">scheduleNextMonth()</text><!--MD5=[767d11488994101ece723f9662f529e9]
@startuml SD
autonumber
hide footbox

participant "scheduler\n:PaymentScheduler" as SC
participant "timer:\nTimer" as TIMER
participant "task:\nMakePaymentTask" as TASK
participant "org\n:Organization" as org
participant ":App" as app
participant "rt\n:RegistPayment" as rp
participant "payment\n:Payment" as pay
participant "trs\n:Transaction" as trs
participant ":PaymentAPI" as papi
participant "lt\n:ListTransactions" as lt

[o-> SC : create(day, timeOfDay, org)
activate SC
        SC -> SC : scheduleNextMonth()
loop
        activate SC
                SC -> TASK**  : create(org, scheduler)
                SC -> TIMER** : create()
                SC -> SC : date = getNextDate(day, timeOfDaye)
                SC ->TIMER: schedule(task, date)
        deactivate SC
deactivate SC
        activate TIMER
                note over SC,TIMER  : On the specified date and time
                TIMER->TASK:run()
                activate TASK
                        TASK->TASK: makePayments()
                        activate TASK
                                TASK -> org : lt = getListTransaction()
                                activate org
                                deactivate org
                                TASK -> app : rp = getRegistPayment()
                                activate app
                                deactivate app
                                TASK -> rp : payment = newPayment(lt)
                                activate rp
                                        rp -> pay ** : create(lt, org)
                                deactivate rp
                                TASK -> pay : processPayments()
                                activate pay
                                        loop for each transaction
                                                pay -> pay : trs = getTransaction(ID)
                                                pay -> trs : makeBankTransfer()
                                                activate trs
                                                        trs -> trs: amount = getAmountToPay()
                                                        trs -> trs: IBAN = getFreelancerIBAN()
                                                        trs -> papi: payTo(amount, IBAN)
                                                        activate papi
                                                        deactivate papi
                                                deactivate trs
                                        end
                                        pay -> pay : sendEmails()
                                deactivate pay
                                TASK -> org : removeUnpaidTransactions()
                                activate org
                                deactivate org
                                TASK -> rp : payment = addPayment(payment)
                                activate rp
                                        rp -> rp : validate(payment)
                                        rp -> rp : add(payment)
                                deactivate rp
                        deactivate TASK
                        TASK -> SC : scheduleNextMonth()
                        activate SC
                deactivate TASK
        deactivate TIMER
end


@enduml

PlantUML version 1.2020.10(Sun May 17 10:35:57 WEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 14+36
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>